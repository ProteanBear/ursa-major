import React from 'react';
import { Row, Col, Card, Button, Icon, Drawer, Form, Input, Radio, Select, Cascader, Upload } from 'antd';
import { DictionaryLoader, DictionaryData } from '../app/DictionaryLoader';
import { FormComponentProps } from 'antd/lib/form';

/**
 * 人员管理组件：医技人员
 */
class StaffTechnical extends React.Component<FormComponentProps>{
    state:{drawerVisible:boolean}= { 
        drawerVisible: false 
    };

    showDrawer = () => {
        this.setState({
            drawerVisible: true,
        });
    };

    onClose = () => {
        this.setState({
            drawerVisible: false,
        });
    };

    render(){
        const {getFieldDecorator} = this.props.form;
        const {Meta}=Card;
        const {Option}=Select;
        const education=DictionaryLoader.instance.education();
        const job=DictionaryLoader.instance.job();

        return (
            <div>
                <Row>
                    <Col span={3}>
                        <Card
                            cover={
                                <img
                                    alt="example"
                                    src="https://gw.alipayobjects.com/zos/rmsportal/JiqGstEfoWAOHiTxclqi.png"
                                />
                            }
                        >
                            <Meta
                                title="姓名"
                                description="主治技师"
                            />
                        </Card>
                    </Col>
                    <Col span={3} offset={1}>
                        <Button type="dashed" 
                            style={{width:"100%",height:173}}
                            onClick={this.showDrawer}
                        >
                            <Icon type="plus" /><br/>
                            添加
                        </Button>
                    </Col>
                </Row>
                
                {/* 编辑抽屉 */}
                <Drawer
                    title="添加医技人员" width={560}
                    onClose={this.onClose}
                    visible={this.state.drawerVisible}
                >
                    <Form labelCol={{span:6}} wrapperCol={{span:18}}>
                        <h4 className="title-form-sub">信息填写</h4>
                        <Row>
                            <Col span={15}>
                                <Form.Item label="人员姓名">{
                                    getFieldDecorator("person.name",{
                                        rules:[
                                            {required:true}
                                        ]
                                    })(<Input placeholder="请输入" required={true}/>)}
                                </Form.Item>
                            </Col>
                            <Col span={9}>
                                <Form.Item label="性别" 
                                    labelCol={{span:8}} wrapperCol={{span:16}}
                                >
                                    <Radio.Group value={1}>
                                        <Radio value={1}>男</Radio>
                                        <Radio value={2}>女</Radio>
                                    </Radio.Group>
                                </Form.Item>
                            </Col>
                        </Row>
                        <Row>
                            <Col span={15}>
                                <Form.Item label="身份证号">{
                                    getFieldDecorator("person.identity",{
                                        rules:[
                                            {required:true}
                                        ]
                                    })(<Input placeholder="请输入" required={true}/>)}
                                </Form.Item>
                            </Col>
                            <Col span={9}>
                                <Form.Item label="年龄" 
                                    labelCol={{span:8}} wrapperCol={{span:16}}
                                >
                                    <span className="ant-form-text">30岁</span>
                                </Form.Item>
                            </Col>
                        </Row>
                        <Row>
                            <Col span={15}>
                                <Form.Item label="毕业院校">
                                    <Input placeholder="请输入" required={true}/>
                                </Form.Item>
                            </Col>
                            <Col span={9}>
                                <Form.Item label="学历" 
                                    labelCol={{span:8}} wrapperCol={{span:16}}
                                >
                                    <Select showSearch
                                        placeholder="请选择"
                                        optionFilterProp="children"
                                        filterOption={(input, option:React.ReactElement) =>
                                            option.props.children.toLowerCase().indexOf(input.toLowerCase()) >= 0
                                        }
                                    >
                                        {education.map((data:DictionaryData,index:number)=>
                                            <Option key={data.value}>{data.label}</Option>
                                        )}
                                    </Select>
                                </Form.Item>
                            </Col>
                        </Row>
                        <Row>
                            <Col span={15}>
                                <Form.Item label="职务职称">{
                                    getFieldDecorator("person.job",{
                                        rules:[
                                            {required:false}
                                        ]
                                    })(<Cascader options={job} placeholder="请选择" />)}
                                </Form.Item>
                            </Col>
                            <Col span={9}>
                                <Form.Item label="科室"
                                    labelCol={{span:8}} wrapperCol={{span:16}}
                                >
                                    <Input placeholder="请输入" required={true}/>
                                </Form.Item>
                            </Col>
                        </Row>
                        <h4 className="title-form-sub">上传内容</h4>
                        <Row>
                            <Col span={12}>
                                <Form.Item labelCol={{span:24}} wrapperCol={{span:24}}
                                    label="身份证正面" help="支持扩展名：.jpg .png">{
                                        getFieldDecorator("person.identity.front",{
                                            rules:[
                                                {required:true}
                                            ]
                                        })(
                                            <Row>
                                                <Col span={10}>
                                                    <Upload
                                                        name="person.identity.front"
                                                        listType="picture-card"
                                                        className="avatar-uploader"
                                                        showUploadList={false}
                                                    >
                                                        <div>
                                                            <Icon type="plus" />
                                                            <div className="ant-upload-text">上传</div>
                                                        </div>
                                                    </Upload>
                                                </Col>
                                                <Col span={11} offset={1}>
                                                    <Button type="dashed" style={{height:102,width:102}}>
                                                        <Icon type="file-image" style={{fontSize:32}} />
                                                        <br/>
                                                        <span>示例图</span><Icon type="zoom-in" />
                                                    </Button>
                                                </Col>
                                            </Row>
                                        )}
                                </Form.Item>
                            </Col>
                            <Col span={12}>
                                <Form.Item labelCol={{span:24}} wrapperCol={{span:24}}
                                    label="身份证背面" help="支持扩展名：.jpg .png">{
                                        getFieldDecorator("person.identity.back",{
                                            rules:[
                                                {required:true}
                                            ]
                                        })(
                                            <Row>
                                                <Col span={10}>
                                                    <Upload
                                                        name="person.identity.back"
                                                        listType="picture-card"
                                                        className="avatar-uploader"
                                                        showUploadList={false}
                                                    >
                                                        <div>
                                                            <Icon type="plus" />
                                                            <div className="ant-upload-text">上传</div>
                                                        </div>
                                                    </Upload>
                                                </Col>
                                                <Col span={11} offset={1}>
                                                    <Button type="dashed" style={{height:102,width:102}}>
                                                        <Icon type="file-image" style={{fontSize:32}} />
                                                        <br/>
                                                        <span>示例图</span><Icon type="zoom-in" />
                                                    </Button>
                                                </Col>
                                            </Row>
                                        )}
                                </Form.Item>
                            </Col>
                        </Row>
                        <Row>
                            <Col span={12}>
                                <Form.Item labelCol={{span:24}} wrapperCol={{span:24}}
                                    label="二寸寸照" help="支持扩展名：.jpg .png">{
                                        getFieldDecorator("person.photo",{
                                            rules:[
                                                {required:true}
                                            ]
                                        })(
                                            <Row>
                                                <Col span={10}>
                                                    <Upload
                                                        name="person.photo"
                                                        listType="picture-card"
                                                        className="avatar-uploader"
                                                        showUploadList={false}
                                                    >
                                                        <div>
                                                            <Icon type="plus" />
                                                            <div className="ant-upload-text">上传</div>
                                                        </div>
                                                    </Upload>
                                                </Col>
                                                <Col span={11} offset={1}>
                                                    <Button type="dashed" style={{height:102,width:102}}>
                                                        <Icon type="file-image" style={{fontSize:32}} />
                                                        <br/>
                                                        <span>示例图</span><Icon type="zoom-in" />
                                                    </Button>
                                                </Col>
                                            </Row>
                                        )}
                                </Form.Item>
                            </Col>
                        </Row>
                        <Row>
                            <Col span={24}>
                            <Form.Item labelCol={{span:24}} wrapperCol={{span:24}}
                                    label="执业证书照片" help="支持扩展名：.jpg .png">{
                                        getFieldDecorator("person.photo",{
                                            rules:[
                                                {required:true}
                                            ]
                                        })(
                                            <Row>
                                                <Col span={6}>
                                                    <Upload
                                                        name="person.photo"
                                                        listType="picture-card"
                                                        className="avatar-uploader"
                                                        showUploadList={false}
                                                    >
                                                        <div>
                                                            <Icon type="plus" />
                                                            <div className="ant-upload-text">上传</div>
                                                        </div>
                                                    </Upload>
                                                </Col>
                                            </Row>
                                        )}
                                </Form.Item>
                            </Col>
                        </Row>
                        <Row>
                            <Col span={24}>
                            <Form.Item labelCol={{span:24}} wrapperCol={{span:24}}
                                    label="资格证书照片" help="支持扩展名：.jpg .png">{
                                        getFieldDecorator("person.photo",{
                                            rules:[
                                                {required:true}
                                            ]
                                        })(
                                            <Row>
                                                <Col span={6}>
                                                    <Upload
                                                        name="person.photo"
                                                        listType="picture-card"
                                                        className="avatar-uploader"
                                                        showUploadList={false}
                                                    >
                                                        <div>
                                                            <Icon type="plus" />
                                                            <div className="ant-upload-text">上传</div>
                                                        </div>
                                                    </Upload>
                                                </Col>
                                            </Row>
                                        )}
                                </Form.Item>
                            </Col>
                        </Row>
                        <Row>
                            <Col span={24}>
                            <Form.Item labelCol={{span:24}} wrapperCol={{span:24}}
                                    label="职称证书照片" help="支持扩展名：.jpg .png">{
                                        getFieldDecorator("person.photo",{
                                            rules:[
                                                {required:true}
                                            ]
                                        })(
                                            <Row>
                                                <Col span={6}>
                                                    <Upload
                                                        name="person.photo"
                                                        listType="picture-card"
                                                        className="avatar-uploader"
                                                        showUploadList={false}
                                                    >
                                                        <div>
                                                            <Icon type="plus" />
                                                            <div className="ant-upload-text">上传</div>
                                                        </div>
                                                    </Upload>
                                                </Col>
                                            </Row>
                                        )}
                                </Form.Item>
                            </Col>
                        </Row>
                    </Form>
                    <div className="bottom-bar">
                        <Button onClick={this.onClose} style={{ marginRight: 8 }}>
                            取消
                        </Button>
                        <Button onClick={this.onClose} type="primary">
                            保存
                        </Button>
                    </div>
                </Drawer>
            </div>
        );
    }
}
export default Form.create({name:"technicalForm"})(StaffTechnical);