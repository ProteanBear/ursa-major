{"ast":null,"code":"import \"antd/es/form/style/css\";\nimport _Form from \"antd/es/form\";\nimport \"antd/es/notification/style/css\";\nimport _notification from \"antd/es/notification\";\nimport \"antd/es/col/style/css\";\nimport _Col from \"antd/es/col\";\nimport \"antd/es/button/style/css\";\nimport _Button from \"antd/es/button\";\nimport \"antd/es/divider/style/css\";\nimport _Divider from \"antd/es/divider\";\nimport \"antd/es/breadcrumb/style/css\";\nimport _Breadcrumb from \"antd/es/breadcrumb\";\nimport \"antd/es/icon/style/css\";\nimport _Icon from \"antd/es/icon\";\nimport \"antd/es/spin/style/css\";\nimport _Spin from \"antd/es/spin\";\nimport \"antd/es/typography/style/css\";\nimport _Typography from \"antd/es/typography\";\nimport _objectSpread from \"/Users/maqiang/\\u7F16\\u7A0B/yzwj-recorder-web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nvar _jsxFileName = \"/Users/maqiang/\\u7F16\\u7A0B/yzwj-recorder-web/src/pages/public/RecordCommitment.tsx\";\nimport React from 'react';\nimport Container from '../../components/Container';\nimport { withRouter } from 'react-router-dom';\nimport { ApplySectionPrompt, ApplySectionRecordStep } from '../../components/ApplyHeader';\nimport ApplyFormCommitment from '../../components/ApplyFormCommitment';\nimport { ApplyStep, PageError500 } from '../../app/Model';\nimport { HttpRequest } from '../../app/Request';\nimport InteractionUtils from '../../utils/InteractionUtils';\nimport ApplyUtils from '../../utils/ApplyUtils';\n/**\n * 备案流程：第一步，承诺书\n */\n\nclass RecordCommitment extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      serialNumber: this.props.match.params.id,\n      loading: false\n      /**\n       * 页面布局\n       */\n\n    };\n\n    this.uploadCompleted = url => {\n      this.setState(_objectSpread({}, this.state, {\n        data: _objectSpread({}, this.state.data, {\n          commitment: url\n        })\n      })); // 上传完成后自动保存进入下一步\n\n      this.saveCommitmentAndNext();\n    };\n\n    this.saveCommitmentAndNext = async () => {\n      if (!this.state.data) return;\n      this.setState(_objectSpread({}, this.state, {\n        loading: true\n      }));\n      const saveResponse = await new HttpRequest().post(\"webapi/apply/saveCommitment\", {\n        applyNo: this.state.serialNumber,\n        commitment: this.state.data.commitment\n      });\n\n      if (!saveResponse.success) {\n        this.props.history.push(PageError500);\n      }\n\n      this.setState(_objectSpread({}, this.state, {\n        loading: false\n      }));\n      InteractionUtils.scrollToTop();\n      this.props.history.push(ApplyStep.RECORD_ORGANIZATION.routePath(this.state.serialNumber));\n    };\n  }\n\n  render() {\n    const Title = _Typography.Title; //未载入数据时\n\n    if (!this.state.data) {\n      return React.createElement(Container, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 37\n        },\n        __self: this\n      }, React.createElement(_Spin, {\n        className: \"page-loading\",\n        size: \"large\",\n        tip: \"\\u6B63\\u5728\\u8F7D\\u5165\\u2026\\u2026\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 38\n        },\n        __self: this\n      }));\n    } //载入数据成功后\n\n\n    return React.createElement(Container, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 45\n      },\n      __self: this\n    }, React.createElement(_Breadcrumb, {\n      className: \"breadcrumb\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 47\n      },\n      __self: this\n    }, React.createElement(_Breadcrumb.Item, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 48\n      },\n      __self: this\n    }, React.createElement(_Icon, {\n      type: \"file-text\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 48\n      },\n      __self: this\n    }), React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 48\n      },\n      __self: this\n    }, \"\\u6267\\u4E1A\\u7533\\u8BF7\")), React.createElement(_Breadcrumb.Item, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 49\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 49\n      },\n      __self: this\n    }, \"\\u5907\\u6848\"))), React.createElement(Title, {\n      level: 4,\n      className: \"title-with-underline\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 51\n      },\n      __self: this\n    }, \"\\u5907\\u6848\\u7533\\u8BF7\"), React.createElement(ApplySectionPrompt, {\n      serialNumber: this.state.serialNumber,\n      deadline: this.state.data.effectiveTime,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 54\n      },\n      __self: this\n    }), React.createElement(ApplySectionRecordStep, Object.assign({}, ApplyStep.RECORD_COMMITMENT, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 56\n      },\n      __self: this\n    })), React.createElement(_Divider, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 57\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      className: \"title-inner\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 57\n      },\n      __self: this\n    }, \"\\u7B2C\\u4E00\\u6B65\\uFF1A\\u627F\\u8BFA\\u4E66\")), React.createElement(ApplyFormCommitment, {\n      serialNumber: this.state.serialNumber,\n      organization: this.state.data,\n      onUploadCompleted: this.uploadCompleted,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 60\n      },\n      __self: this\n    }), React.createElement(_Col, {\n      span: 24,\n      className: \"section-buttons\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67\n      },\n      __self: this\n    }, React.createElement(_Button, {\n      type: \"primary\",\n      loading: this.state.loading,\n      disabled: \"\" === this.state.data.commitment,\n      onClick: this.saveCommitmentAndNext,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68\n      },\n      __self: this\n    }, \"\\u4FDD\\u5B58\\u5E76\\u8FDB\\u5165\\u4E0B\\u4E00\\u6B65\")));\n  }\n  /**\n   * 组件完成后请求获取申请信息\n   */\n\n\n  async componentDidMount() {\n    // 获取机构申请信息\n    const applyResponse = await new HttpRequest().get(\"webapi/apply/getRecordInfo?applyNo=\".concat(this.state.serialNumber)); // 失败跳转500\n\n    if (!applyResponse.success || !applyResponse.data) {\n      this.props.history.push(PageError500);\n      return;\n    } // 不可编辑跳转审核结果\n\n\n    const status = applyResponse.data.status;\n\n    if (!ApplyUtils.canEdit(status)) {\n      this.props.history.push(ApplyStep.RECORD_RESULT.routePath(this.state.serialNumber));\n      return;\n    } // 设置显示\n\n\n    this.setState(_objectSpread({}, this.state, {\n      data: applyResponse.data\n    })); // 审核被驳回，获取驳回理由\n\n    if (ApplyUtils.needLoadReject(status)) {\n      const rejectArrayResponse = await new HttpRequest().get(\"webapi/apply/auditOpinion?applyNo=\".concat(this.state.serialNumber)); // 失败\n\n      if (!rejectArrayResponse.success || !rejectArrayResponse.data) {\n        return;\n      } // 找到最新的拒绝内容\n\n\n      let rejectContent = null;\n\n      for (let l = rejectArrayResponse.data.length, i = l - 1; i > -1; i--) {\n        const current = rejectArrayResponse.data[i];\n\n        if (ApplyUtils.inspectIsReject(current.status)) {\n          rejectContent = current;\n          break;\n        }\n      } //通知显示拒绝理由\n\n\n      if (!rejectContent) return;\n\n      _notification[\"warning\"]({\n        message: \"申请被驳回！\",\n        description: rejectContent.opinion\n      });\n    }\n  }\n  /**\n   * 告知承诺书上传完成\n   */\n\n\n}\n\nexport default withRouter(_Form.create({\n  name: \"pageRecordCommitment\"\n})(RecordCommitment));","map":{"version":3,"sources":["/Users/maqiang/编程/yzwj-recorder-web/src/pages/public/RecordCommitment.tsx"],"names":["React","Container","withRouter","ApplySectionPrompt","ApplySectionRecordStep","ApplyFormCommitment","ApplyStep","PageError500","HttpRequest","InteractionUtils","ApplyUtils","RecordCommitment","Component","state","serialNumber","props","match","params","id","loading","uploadCompleted","url","setState","data","commitment","saveCommitmentAndNext","saveResponse","post","applyNo","success","history","push","scrollToTop","RECORD_ORGANIZATION","routePath","render","Title","effectiveTime","RECORD_COMMITMENT","componentDidMount","applyResponse","get","status","canEdit","RECORD_RESULT","needLoadReject","rejectArrayResponse","rejectContent","l","length","i","current","inspectIsReject","message","description","opinion","create","name"],"mappings":"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","sourcesContent":["import React from 'react';\nimport Container from '../../components/Container';\nimport { Breadcrumb,Icon,Typography, Button, Divider,Col,Form,message, Spin, notification} from 'antd';\nimport { Link, withRouter } from 'react-router-dom';\nimport { ApplySectionPrompt, ApplySectionRecordStep } from '../../components/ApplyHeader';\nimport ApplyFormCommitment  from '../../components/ApplyFormCommitment';\nimport { ApplyStep, AppComponentProps, ApplyContentOrganization, PageError500, ApplyInspectContent} from '../../app/Model';\nimport { HttpResponse, HttpRequest } from '../../app/Request';\nimport InteractionUtils from '../../utils/InteractionUtils';\nimport ApplyUtils from '../../utils/ApplyUtils';\n\n/**\n * 备案流程：第一步，承诺书\n */\nclass RecordCommitment extends React.Component<AppComponentProps>{\n    readonly state:{\n        /**申请单号 */\n        serialNumber:string;\n        /**保存按钮是否请求中 */\n        loading:boolean;\n        /**申请内容 */\n        data?:ApplyContentOrganization,\n    }={\n        serialNumber:this.props.match.params.id,\n        loading:false\n    }\n\n    /**\n     * 页面布局\n     */\n    render(){\n        const {Title}=Typography;\n\n        //未载入数据时\n        if(!this.state.data){\n            return (\n                <Container>\n                    <Spin className=\"page-loading\" size=\"large\" tip=\"正在载入……\"></Spin>\n                </Container>\n            );\n        }\n\n        //载入数据成功后\n        return (\n            <Container>\n                {/* 标题 */}\n                <Breadcrumb className=\"breadcrumb\">\n                    <Breadcrumb.Item><Icon type=\"file-text\"/><span>执业申请</span></Breadcrumb.Item>\n                    <Breadcrumb.Item><span>备案</span></Breadcrumb.Item>\n                </Breadcrumb>\n                <Title level={4} className=\"title-with-underline\">备案申请</Title>\n\n                {/* 顶部 */}\n                <ApplySectionPrompt serialNumber={this.state.serialNumber} \n                    deadline={this.state.data.effectiveTime} />\n                <ApplySectionRecordStep {...ApplyStep.RECORD_COMMITMENT} />\n                <Divider><span className=\"title-inner\">第一步：承诺书</span></Divider>\n\n                {/* 表单 */}\n                <ApplyFormCommitment \n                    serialNumber={this.state.serialNumber} \n                    organization={this.state.data} \n                    onUploadCompleted={this.uploadCompleted}\n                />\n\n                {/* 按钮 */}\n                <Col span={24} className=\"section-buttons\">\n                    <Button type=\"primary\" \n                        loading={this.state.loading}\n                        disabled={\"\"===this.state.data.commitment}\n                        onClick={this.saveCommitmentAndNext}\n                        >\n                        保存并进入下一步\n                    </Button>\n                </Col>\n            </Container>\n        );\n    }\n\n    /**\n     * 组件完成后请求获取申请信息\n     */\n    async componentDidMount(){\n        // 获取机构申请信息\n        const applyResponse:HttpResponse<ApplyContentOrganization>=\n            await ((new HttpRequest()).get<ApplyContentOrganization>(\n                `webapi/apply/getRecordInfo?applyNo=${this.state.serialNumber}`\n            ));\n\n        // 失败跳转500\n        if(!applyResponse.success||!applyResponse.data){\n            this.props.history.push(PageError500);\n            return;\n        }\n\n        // 不可编辑跳转审核结果\n        const {status}=applyResponse.data;\n        if(!ApplyUtils.canEdit(status)){\n            this.props.history.push(ApplyStep.RECORD_RESULT.routePath(this.state.serialNumber));\n            return;\n        }\n\n        // 设置显示\n        this.setState({\n            ...this.state,\n            data:applyResponse.data\n        });\n\n        // 审核被驳回，获取驳回理由\n        if(ApplyUtils.needLoadReject(status)){\n            const rejectArrayResponse:HttpResponse<Array<ApplyInspectContent>>=\n            await ((new HttpRequest()).get<Array<ApplyInspectContent>>(\n                `webapi/apply/auditOpinion?applyNo=${this.state.serialNumber}`\n            ));\n\n            // 失败\n            if(!rejectArrayResponse.success||!rejectArrayResponse.data){\n                return;\n            }\n\n            // 找到最新的拒绝内容\n            let rejectContent:ApplyInspectContent|null=null;\n            for(let l=rejectArrayResponse.data.length,i=l-1;i>-1;i--){\n                const current=rejectArrayResponse.data[i];\n                if(ApplyUtils.inspectIsReject(current.status)){\n                    rejectContent=current;\n                    break;\n                }\n            }\n\n            //通知显示拒绝理由\n            if(!rejectContent) return;\n            notification[\"warning\"]({\n                message:\"申请被驳回！\",\n                description:rejectContent.opinion\n            });\n        }\n    }\n\n    /**\n     * 告知承诺书上传完成\n     */\n    uploadCompleted=(url:string)=>{\n        this.setState({\n            ...this.state,\n            data:{\n                ...this.state.data,\n                commitment:url\n            }\n        });\n\n        // 上传完成后自动保存进入下一步\n        this.saveCommitmentAndNext();\n    }\n\n    /**\n     * 保存后并进入下一步\n     */\n    saveCommitmentAndNext=async ()=>{\n        if(!this.state.data) return;\n        this.setState({...this.state,loading:true});\n\n        const saveResponse:HttpResponse<any>=\n            await ((new HttpRequest()).post<any,{applyNo:string,commitment:string}>(\n                \"webapi/apply/saveCommitment\",\n                {\n                    applyNo:this.state.serialNumber,\n                    commitment:this.state.data.commitment\n                }\n            ));\n\n        if(!saveResponse.success){\n            this.props.history.push(PageError500);\n        }\n\n        this.setState({...this.state,loading:false});\n        InteractionUtils.scrollToTop();\n        this.props.history.push(ApplyStep.RECORD_ORGANIZATION.routePath(this.state.serialNumber));\n    }\n}\nexport default withRouter((Form.create({name:\"pageRecordCommitment\"})(RecordCommitment) as any));"]},"metadata":{},"sourceType":"module"}