{"ast":null,"code":"import \"antd/es/button/style/css\";\nimport _Button from \"antd/es/button\";\nimport \"antd/es/upload/style/css\";\nimport _Upload from \"antd/es/upload\";\nimport \"antd/es/icon/style/css\";\nimport _Icon from \"antd/es/icon\";\nimport \"antd/es/cascader/style/css\";\nimport _Cascader from \"antd/es/cascader\";\nimport \"antd/es/date-picker/style/css\";\nimport _DatePicker from \"antd/es/date-picker\";\nimport \"antd/es/row/style/css\";\nimport _Row from \"antd/es/row\";\nimport \"antd/es/radio/style/css\";\nimport _Radio from \"antd/es/radio\";\nimport \"antd/es/col/style/css\";\nimport _Col from \"antd/es/col\";\nimport \"antd/es/form/style/css\";\nimport _Form from \"antd/es/form\";\nimport \"antd/es/input/style/css\";\nimport _Input from \"antd/es/input\";\nimport \"antd/es/select/style/css\";\nimport _Select from \"antd/es/select\";\nimport \"antd/es/modal/style/css\";\nimport _Modal from \"antd/es/modal\";\nimport _objectSpread from \"/Users/maqiang/\\u7F16\\u7A0B/yzwj-recorder-web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nvar _jsxFileName = \"/Users/maqiang/\\u7F16\\u7A0B/yzwj-recorder-web/src/components/ApplyFormLegal.tsx\";\nimport React from 'react';\nimport { DictionaryLoader } from '../app/DictionaryLoader';\nimport ApplyFormResume from './ApplyFormResume';\nimport { HttpRequest } from '../app/Request';\nimport ApplyUtils from '../utils/ApplyUtils';\nimport ImageViewer from './ImageViewer';\nimport moment from 'moment';\n\n/**\n * 申请公用表单：法人相关信息\n */\nclass ApplyFormLegal extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      data: this.props.manager,\n      hasFileValidateError: false,\n      fileList: {\n        \"signature\": [],\n        \"identityFront\": [],\n        \"identityBack\": []\n      },\n      uploadSuccess: {\n        \"signature\": true,\n        \"identityFront\": true,\n        \"identityBack\": true\n      },\n      uploadLimit: {\n        \"signature\": 1,\n        \"identityFront\": 1,\n        \"identityBack\": 1\n      }\n      /**\n       * 上传组件配置：图片\n       */\n\n    };\n    this.uploadPhotoConfig = {\n      accept: \".jpg,.png\",\n      listType: \"picture-card\",\n      className: \"avatar-uploader\",\n      showUploadList: true\n      /**\n       * 页面布局\n       */\n\n    };\n\n    this.componentDidMount = () => {\n      const idcardImg = this.props.manager.idcardImg;\n      const identityArray = idcardImg.split(\",\");\n      const idFrontString = identityArray[0],\n            idBackString = identityArray.length > 1 ? identityArray[1] : \"\";\n      const _this$state$fileList = this.state.fileList,\n            identityFront = _this$state$fileList.identityFront,\n            identityBack = _this$state$fileList.identityBack;\n      this.setState(_objectSpread({}, this.state, {\n        fileList: _objectSpread({}, this.state.fileList, {\n          identityFront: ApplyUtils.urlStringToUploadArray(identityFront, idFrontString),\n          identityBack: ApplyUtils.urlStringToUploadArray(identityBack, idBackString)\n        })\n      }));\n    };\n\n    this.uploadPhoto = async (fileObject, key) => {\n      // 上传文件或图片\n      const option = fileObject;\n      const uploadResponse = await new HttpRequest().upload(\"webapi/comm/uploadFile\", option.file, \"file\", {\n        applyNo: this.props.serialNumber\n      });\n      const uploadSuccess = this.state.uploadSuccess;\n      uploadSuccess[key] = uploadResponse.success && uploadResponse.data !== null; //上传失败显示\n\n      if (!uploadSuccess[key] || !uploadResponse.data) {\n        this.setState(_objectSpread({}, this.state, {\n          uploadSuccess: uploadSuccess\n        }));\n        return;\n      } //上传成功，设置已上传列表\n\n\n      const fileList = this.state.fileList;\n      fileList[key].push({\n        uid: String(fileList[key].length),\n        name: option.file.name,\n        size: 0,\n        type: \"\",\n        url: uploadResponse.data.url\n      });\n      this.setState(_objectSpread({}, this.state, {\n        uploadSuccess: uploadSuccess,\n        fileList: fileList\n      }));\n    };\n\n    this.uploadPhotoPreview = (uploadFile, key) => {\n      // 获取全部上传的图片元素\n      const row = document.querySelector(\".\".concat(key, \"-photos\"));\n      if (!row) return;\n      const imgArray = row.querySelectorAll(\".ant-upload-list-item-image\");\n      const imageList = [];\n      const fileList = this.state.fileList;\n      const viewImageNameSet = ApplyUtils.uploadArrayToNameSet(fileList[key]);\n      let currentIndex = 0;\n      imgArray.forEach((img, index) => {\n        if (viewImageNameSet.has(img.alt)) {\n          imageList.push(img);\n          currentIndex = img.alt === uploadFile.name ? index : currentIndex;\n        }\n      });\n      ImageViewer.view(imageList, currentIndex);\n    };\n\n    this.uploadPhotoRemove = (file, key) => {\n      const confirm = _Modal.confirm;\n      const fileList = this.state.fileList;\n      confirm({\n        title: '确定要删除当前上传的图片么？',\n        okText: '继续删除',\n        okType: 'danger',\n        cancelText: '取消',\n        onOk: () => {\n          fileList[key].splice(fileList[key].findIndex(item => item.uid === file.uid), 1);\n          this.setState(_objectSpread({}, this.state, {\n            fileList: fileList\n          }));\n        }\n      });\n    };\n\n    this.resumeChangeHandler = resumes => {\n      const data = this.state.data;\n      data.personalResumes = resumes;\n      this.setState(_objectSpread({}, this.state, {\n        data: data\n      }));\n    };\n\n    this.validateFieldsAndScroll = () => new Promise((resolve, reject) => {\n      this.props.form.validateFieldsAndScroll((errors, values) => {\n        //格式转换\n        values.birthday = values.birthday.format(\"YYYY-MM-DD\"); //报错返回\n\n        if (errors) {\n          resolve(_objectSpread({\n            hasError: true,\n            message: \"\",\n            data: null\n          }, values));\n        } // 验证文件列表\n\n\n        const _this$state$fileList2 = this.state.fileList,\n              identityFront = _this$state$fileList2.identityFront,\n              identityBack = _this$state$fileList2.identityBack,\n              signature = _this$state$fileList2.signature;\n\n        if (identityFront.length < 1) {\n          this.setState(_objectSpread({}, this.state, {\n            hasFileValidateError: true\n          }));\n          resolve({\n            hasError: true,\n            message: \"必须上传身份证正面图片！\",\n            data: null\n          });\n        }\n\n        if (identityBack.length < 1) {\n          this.setState(_objectSpread({}, this.state, {\n            hasFileValidateError: true\n          }));\n          resolve({\n            hasError: true,\n            message: \"必须上传身份证背面图片！\",\n            data: null\n          });\n        }\n\n        if (signature.length < 1) {\n          this.setState(_objectSpread({}, this.state, {\n            hasFileValidateError: true\n          }));\n          resolve({\n            hasError: true,\n            message: \"必须上传签字表图片！\",\n            data: null\n          });\n        } // 转换文件列表\n\n\n        const identityImages = ApplyUtils.uploadArrayToUrlString(identityFront.concat(identityBack));\n        const signatureImages = ApplyUtils.uploadArrayToUrlString(signature);\n        resolve(_objectSpread({}, this.state.data, values, {\n          idcardImg: identityImages,\n          signature: signatureImages\n        }));\n      });\n    });\n  }\n\n  render() {\n    const getFieldDecorator = this.props.form.getFieldDecorator;\n    const Option = _Select.Option;\n    const data = this.state.data;\n    const education = DictionaryLoader.instance.education();\n    const job = DictionaryLoader.instance.job();\n    return React.createElement(_Form, {\n      layout: \"vertical\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85\n      },\n      __self: this\n    }, React.createElement(_Row, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86\n      },\n      __self: this\n    }, React.createElement(_Col, {\n      span: 8,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87\n      },\n      __self: this\n    }, React.createElement(_Form.Item, {\n      label: \"\\u59D3\\u540D\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88\n      },\n      __self: this\n    }, getFieldDecorator(\"name\", {\n      initialValue: data.name,\n      rules: [{\n        required: true,\n        message: \"姓名不能为空！\"\n      }]\n    })(React.createElement(_Input, {\n      placeholder: \"\\u8BF7\\u8F93\\u5165\",\n      disabled: this.props.disabled,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94\n      },\n      __self: this\n    })))), React.createElement(_Col, {\n      span: 7,\n      offset: 1,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97\n      },\n      __self: this\n    }, React.createElement(_Form.Item, {\n      label: \"\\u6027\\u522B\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98\n      },\n      __self: this\n    }, getFieldDecorator(\"sex\", {\n      initialValue: \"\" === data.sex ? \"男\" : data.sex,\n      rules: [{\n        required: false\n      }]\n    })(React.createElement(_Radio.Group, {\n      disabled: this.props.disabled,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105\n      },\n      __self: this\n    }, React.createElement(_Radio, {\n      value: \"\\u7537\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106\n      },\n      __self: this\n    }, \"\\u7537\"), React.createElement(_Radio, {\n      value: \"\\u5973\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107\n      },\n      __self: this\n    }, \"\\u5973\")))))), React.createElement(_Row, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113\n      },\n      __self: this\n    }, React.createElement(_Col, {\n      span: 8,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114\n      },\n      __self: this\n    }, React.createElement(_Form.Item, {\n      label: \"\\u51FA\\u751F\\u5E74\\u6708\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115\n      },\n      __self: this\n    }, getFieldDecorator(\"birthday\", {\n      initialValue: \"\" === data.birthday ? undefined : moment(data.birthday),\n      rules: [{\n        required: false\n      }]\n    })(React.createElement(_DatePicker, {\n      placeholder: \"\\u8BF7\\u9009\\u62E9\\u65E5\\u671F\",\n      disabled: this.props.disabled,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121\n      },\n      __self: this\n    })))), React.createElement(_Col, {\n      span: 7,\n      offset: 1,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124\n      },\n      __self: this\n    }, React.createElement(_Form.Item, {\n      label: \"\\u5B66\\u5386\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125\n      },\n      __self: this\n    }, getFieldDecorator(\"education\", {\n      initialValue: data.education,\n      rules: [{\n        required: false\n      }]\n    })(React.createElement(_Select, {\n      showSearch: true,\n      placeholder: \"\\u8BF7\\u9009\\u62E9\",\n      optionFilterProp: \"children\",\n      filterOption: (input, option) => option.props.children.toLowerCase().indexOf(input.toLowerCase()) >= 0,\n      disabled: this.props.disabled,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132\n      },\n      __self: this\n    }, education.map((data, index) => {\n      return React.createElement(Option, {\n        key: data.value,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141\n        },\n        __self: this\n      }, data.label);\n    }))))), React.createElement(_Col, {\n      span: 7,\n      offset: 1,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147\n      },\n      __self: this\n    }, React.createElement(_Form.Item, {\n      label: \"\\u6BD5\\u4E1A\\u4E13\\u4E1A\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148\n      },\n      __self: this\n    }, getFieldDecorator(\"specialty\", {\n      initialValue: data.specialty,\n      rules: [{\n        required: false\n      }]\n    })(React.createElement(_Input, {\n      placeholder: \"\\u8BF7\\u8F93\\u5165\",\n      disabled: this.props.disabled,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154\n      },\n      __self: this\n    }))))), React.createElement(_Row, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158\n      },\n      __self: this\n    }, React.createElement(_Col, {\n      span: 8,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159\n      },\n      __self: this\n    }, React.createElement(_Form.Item, {\n      label: \"\\u804C\\u52A1\\u804C\\u79F0\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160\n      },\n      __self: this\n    }, getFieldDecorator(\"positionAndTitle\", {\n      initialValue: [data.position, data.title],\n      rules: [{\n        required: true,\n        message: \"职务职称不能为空！\"\n      }]\n    })(React.createElement(_Cascader, {\n      options: job,\n      placeholder: \"\\u8BF7\\u9009\\u62E9\",\n      disabled: this.props.disabled,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167\n      },\n      __self: this\n    })))), React.createElement(_Col, {\n      span: 7,\n      offset: 1,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174\n      },\n      __self: this\n    }, React.createElement(_Form.Item, {\n      label: \"\\u8EAB\\u4EFD\\u8BC1\\u53F7\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175\n      },\n      __self: this\n    }, getFieldDecorator(\"idcard\", {\n      rules: [{\n        required: true,\n        message: \"身份证号码不能为空！\"\n      }]\n    })(React.createElement(_Input, {\n      placeholder: \"\\u8BF7\\u8F93\\u5165\",\n      disabled: this.props.disabled,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180\n      },\n      __self: this\n    }))))), React.createElement(_Row, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184\n      },\n      __self: this\n    }, React.createElement(_Col, {\n      span: 8,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185\n      },\n      __self: this\n    }, React.createElement(_Form.Item, {\n      label: \"\\u7B7E\\u5B57\\u8868\",\n      className: \"signature-photos must-upload\",\n      validateStatus: !this.state.hasFileValidateError ? this.state.uploadSuccess.signature ? \"\" : \"error\" : this.state.fileList.signature.length > 0 ? \"\" : \"error\",\n      help: !this.state.hasFileValidateError ? this.state.uploadSuccess.signature ? \"支持扩展名：.jpg .png\" : \"文件上传失败！\" : this.state.fileList.signature.length > 0 ? \"支持扩展名：.jpg .png\" : \"必须上传此文件！\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186\n      },\n      __self: this\n    }, React.createElement(_Row, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 199\n      },\n      __self: this\n    }, React.createElement(_Col, {\n      span: 8,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 200\n      },\n      __self: this\n    }, React.createElement(_Upload, Object.assign({}, this.uploadPhotoConfig, {\n      name: \"signature\",\n      customRequest: fileObject => {\n        this.uploadPhoto(fileObject, \"signature\");\n      },\n      onRemove: file => {\n        this.uploadPhotoRemove(file, \"signature\");\n      },\n      onPreview: file => {\n        this.uploadPhotoPreview(file, \"signature\");\n      },\n      fileList: this.state.fileList.signature,\n      disabled: this.props.disabled,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 201\n      },\n      __self: this\n    }), this.state.uploadLimit.signature > this.state.fileList.signature.length ? React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 217\n      },\n      __self: this\n    }, React.createElement(_Icon, {\n      type: \"plus\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 218\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"ant-upload-text\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 219\n      },\n      __self: this\n    }, \"\\u4E0A\\u4F20\")) : null)), React.createElement(_Col, {\n      span: 8,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 225\n      },\n      __self: this\n    }, React.createElement(_Button, {\n      type: \"dashed\",\n      style: {\n        width: 102,\n        height: 102\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 226\n      },\n      __self: this\n    }, React.createElement(_Icon, {\n      type: \"download\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 227\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 227\n      },\n      __self: this\n    }), \"\\u7B7E\\u5B57\\u8868\\u6A21\\u677F\"))))), React.createElement(_Col, {\n      span: 7,\n      offset: 1,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 234\n      },\n      __self: this\n    }, React.createElement(_Form.Item, {\n      label: \"\\u8EAB\\u4EFD\\u8BC1\\u6B63\\u9762\",\n      className: \"identityFront-photos must-upload\",\n      validateStatus: !this.state.hasFileValidateError ? this.state.uploadSuccess.identityFront ? \"\" : \"error\" : this.state.fileList.identityFront.length > 0 ? \"\" : \"error\",\n      help: !this.state.hasFileValidateError ? this.state.uploadSuccess.identityFront ? \"支持扩展名：.jpg .png\" : \"文件上传失败！\" : this.state.fileList.identityFront.length > 0 ? \"支持扩展名：.jpg .png\" : \"必须上传此文件！\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 235\n      },\n      __self: this\n    }, React.createElement(_Row, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 248\n      },\n      __self: this\n    }, React.createElement(_Col, {\n      span: 8,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 249\n      },\n      __self: this\n    }, React.createElement(_Upload, Object.assign({}, this.uploadPhotoConfig, {\n      name: \"identityFront\",\n      customRequest: fileObject => {\n        this.uploadPhoto(fileObject, \"identityFront\");\n      },\n      onRemove: file => {\n        this.uploadPhotoRemove(file, \"identityFront\");\n      },\n      onPreview: file => {\n        this.uploadPhotoPreview(file, \"identityFront\");\n      },\n      fileList: this.state.fileList.identityFront,\n      disabled: this.props.disabled,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 250\n      },\n      __self: this\n    }), this.state.uploadLimit.identityFront > this.state.fileList.identityFront.length ? React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 266\n      },\n      __self: this\n    }, React.createElement(_Icon, {\n      type: \"plus\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 267\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"ant-upload-text\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 268\n      },\n      __self: this\n    }, \"\\u4E0A\\u4F20\")) : null)), React.createElement(_Col, {\n      span: 8,\n      offset: 1,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 274\n      },\n      __self: this\n    }, React.createElement(_Button, {\n      type: \"dashed\",\n      style: {\n        height: 102,\n        width: 102\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 275\n      },\n      __self: this\n    }, React.createElement(_Icon, {\n      type: \"file-image\",\n      style: {\n        fontSize: 32\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 276\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 277\n      },\n      __self: this\n    }), React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 278\n      },\n      __self: this\n    }, \"\\u793A\\u4F8B\\u56FE\"), React.createElement(_Icon, {\n      type: \"zoom-in\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 278\n      },\n      __self: this\n    })))))), React.createElement(_Col, {\n      span: 7,\n      offset: 1,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 284\n      },\n      __self: this\n    }, React.createElement(_Form.Item, {\n      label: \"\\u8EAB\\u4EFD\\u8BC1\\u80CC\\u9762\",\n      className: \"identityBack-photos must-upload\",\n      validateStatus: !this.state.hasFileValidateError ? this.state.uploadSuccess.identityBack ? \"\" : \"error\" : this.state.fileList.identityBack.length > 0 ? \"\" : \"error\",\n      help: !this.state.hasFileValidateError ? this.state.uploadSuccess.identityBack ? \"支持扩展名：.jpg .png\" : \"文件上传失败！\" : this.state.fileList.identityBack.length > 0 ? \"支持扩展名：.jpg .png\" : \"必须上传此文件！\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 285\n      },\n      __self: this\n    }, React.createElement(_Row, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 298\n      },\n      __self: this\n    }, React.createElement(_Col, {\n      span: 8,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 299\n      },\n      __self: this\n    }, React.createElement(_Upload, Object.assign({}, this.uploadPhotoConfig, {\n      name: \"identityBack\",\n      customRequest: fileObject => {\n        this.uploadPhoto(fileObject, \"identityBack\");\n      },\n      onRemove: file => {\n        this.uploadPhotoRemove(file, \"identityBack\");\n      },\n      onPreview: file => {\n        this.uploadPhotoPreview(file, \"identityBack\");\n      },\n      fileList: this.state.fileList.identityBack,\n      disabled: this.props.disabled,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 300\n      },\n      __self: this\n    }), this.state.uploadLimit.identityBack > this.state.fileList.identityBack.length ? React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 317\n      },\n      __self: this\n    }, React.createElement(_Icon, {\n      type: \"plus\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 318\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"ant-upload-text\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 319\n      },\n      __self: this\n    }, \"\\u4E0A\\u4F20\")) : null)), React.createElement(_Col, {\n      span: 8,\n      offset: 1,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 325\n      },\n      __self: this\n    }, React.createElement(_Button, {\n      type: \"dashed\",\n      style: {\n        height: 102,\n        width: 102\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 326\n      },\n      __self: this\n    }, React.createElement(_Icon, {\n      type: \"file-image\",\n      style: {\n        fontSize: 32\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 327\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 328\n      },\n      __self: this\n    }), React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 329\n      },\n      __self: this\n    }, \"\\u793A\\u4F8B\\u56FE\"), React.createElement(_Icon, {\n      type: \"zoom-in\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 329\n      },\n      __self: this\n    }))))))), React.createElement(_Row, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 336\n      },\n      __self: this\n    }, React.createElement(_Col, {\n      span: 24,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 337\n      },\n      __self: this\n    }, React.createElement(_Form.Item, {\n      label: \"\\u5DE5\\u4F5C\\u5C65\\u5386\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 338\n      },\n      __self: this\n    }, React.createElement(ApplyFormResume, {\n      resumes: this.props.manager.personalResumes,\n      onChange: this.resumeChangeHandler,\n      disabled: this.props.disabled,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 339\n      },\n      __self: this\n    })))));\n  }\n  /**\n   * 组件载入后，拆解管理人员的身份证正面和反面\n   */\n\n\n}\n\nexport default _Form.create({\n  name: \"applyFormLegal\"\n})(ApplyFormLegal);","map":{"version":3,"sources":["/Users/maqiang/编程/yzwj-recorder-web/src/components/ApplyFormLegal.tsx"],"names":["React","DictionaryLoader","ApplyFormResume","HttpRequest","ApplyUtils","ImageViewer","moment","ApplyFormLegal","Component","state","data","props","manager","hasFileValidateError","fileList","uploadSuccess","uploadLimit","uploadPhotoConfig","accept","listType","className","showUploadList","componentDidMount","idcardImg","identityArray","split","idFrontString","idBackString","length","identityFront","identityBack","setState","urlStringToUploadArray","uploadPhoto","fileObject","key","option","uploadResponse","upload","file","applyNo","serialNumber","success","push","uid","String","name","size","type","url","uploadPhotoPreview","uploadFile","row","document","querySelector","imgArray","querySelectorAll","imageList","viewImageNameSet","uploadArrayToNameSet","currentIndex","forEach","img","index","has","alt","view","uploadPhotoRemove","confirm","title","okText","okType","cancelText","onOk","splice","findIndex","item","resumeChangeHandler","resumes","personalResumes","validateFieldsAndScroll","Promise","resolve","reject","form","errors","values","birthday","format","hasError","message","signature","identityImages","uploadArrayToUrlString","concat","signatureImages","render","getFieldDecorator","Option","education","instance","job","initialValue","rules","required","disabled","sex","undefined","input","children","toLowerCase","indexOf","map","value","label","specialty","position","width","height","fontSize","create"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { Form, Col, Input, Radio, DatePicker, Select, Cascader, Upload, Icon, Row, Button, Modal } from 'antd';\nimport { FormComponentProps } from 'antd/lib/form';\nimport { DictionaryLoader, DictionaryData } from '../app/DictionaryLoader';\nimport ApplyFormResume from './ApplyFormResume';\nimport { ApplyContentManager, ApplyContentManagerResume, FormValidateResult } from '../app/Model';\nimport { UploadFile, UploadProps } from 'antd/lib/upload/interface';\nimport { HttpRequest } from '../app/Request';\nimport ApplyUtils from '../utils/ApplyUtils';\nimport ImageViewer from './ImageViewer';\nimport moment from 'moment';\n\ntype ApplyFormLegalProps=FormComponentProps&{\n    /**当前的申请单号 */\n    serialNumber:string;\n    /**管理人员信息 */\n    manager:ApplyContentManager;\n    /**是否禁止输入 */\n    disabled:boolean;\n}\n\n/**\n * 申请公用表单：法人相关信息\n */\nclass ApplyFormLegal extends React.Component<ApplyFormLegalProps>{\n    readonly state:{\n        /**记录当前的数据信息 */\n        data:ApplyContentManager;\n        /**文件上传验证错误 */\n        hasFileValidateError:boolean;\n        /**上传文件列表 */\n        fileList:{\n            [key:string]:Array<UploadFile>\n        };\n        /**上传是否成功 */\n        uploadSuccess:{\n            [key:string]:boolean\n        };\n        /**上传的数量限制 */\n        uploadLimit:{\n            [key:string]:number\n        }\n    }={\n        data:this.props.manager,\n        hasFileValidateError:false,\n        fileList:{\n            \"signature\":[],\n            \"identityFront\":[],\n            \"identityBack\":[]\n        },\n        uploadSuccess:{\n            \"signature\":true,\n            \"identityFront\":true,\n            \"identityBack\":true\n        },\n        uploadLimit:{\n            \"signature\":1,\n            \"identityFront\":1,\n            \"identityBack\":1\n        },\n    }\n\n    /**\n     * 上传组件配置：图片\n     */\n    private readonly uploadPhotoConfig:UploadProps={\n        accept:\".jpg,.png\",\n        listType:\"picture-card\",\n        className:\"avatar-uploader\",\n        showUploadList:true,\n    }\n\n    /**\n     * 页面布局\n     */\n    render(){\n        const {getFieldDecorator} = this.props.form;\n        const {Option}=Select;\n\n        const {data}=this.state;\n        const education=DictionaryLoader.instance.education();\n        const job=DictionaryLoader.instance.job();\n\n        return (\n            <Form layout=\"vertical\">\n                <Row>\n                    <Col span={8}>\n                        <Form.Item label=\"姓名\">{\n                            getFieldDecorator(\"name\",{\n                                initialValue:data.name,\n                                rules:[\n                                    {required:true,message:\"姓名不能为空！\"}\n                                ]\n                            })(<Input placeholder=\"请输入\" disabled={this.props.disabled}/>)}\n                        </Form.Item>\n                    </Col>\n                    <Col span={7} offset={1}>\n                        <Form.Item label=\"性别\">{\n                            getFieldDecorator(\"sex\",{\n                                initialValue:(\"\"===data.sex?\"男\":data.sex),\n                                rules:[\n                                    {required:false}\n                                ]\n                            })(\n                                <Radio.Group disabled={this.props.disabled}>\n                                    <Radio value=\"男\">男</Radio>\n                                    <Radio value=\"女\">女</Radio>\n                                </Radio.Group>\n                            )}\n                        </Form.Item>\n                    </Col>\n                </Row>\n                <Row>\n                    <Col span={8}>\n                        <Form.Item label=\"出生年月\">{\n                            getFieldDecorator(\"birthday\",{\n                                initialValue:(\"\"===data.birthday?undefined:moment(data.birthday)),\n                                rules:[\n                                    {required:false}\n                                ]\n                            })(<DatePicker placeholder=\"请选择日期\" disabled={this.props.disabled} />)}\n                        </Form.Item>\n                    </Col>\n                    <Col span={7} offset={1}>\n                        <Form.Item label=\"学历\">{\n                            getFieldDecorator(\"education\",{\n                                initialValue:data.education,\n                                rules:[\n                                    {required:false}\n                                ]\n                            })(\n                                <Select showSearch\n                                    placeholder=\"请选择\" \n                                    optionFilterProp=\"children\" \n                                    filterOption={(input, option:React.ReactElement) =>\n                                        option.props.children.toLowerCase().indexOf(input.toLowerCase()) >= 0\n                                    }\n                                    disabled={this.props.disabled}\n                                >\n                                    {education.map((data:DictionaryData,index:number)=>{\n                                        return (<Option key={data.value}>{data.label}</Option>);\n                                    })}\n                                </Select>\n                            )}\n                        </Form.Item>\n                    </Col>\n                    <Col span={7} offset={1}>\n                        <Form.Item label=\"毕业专业\">{\n                            getFieldDecorator(\"specialty\",{\n                                initialValue:data.specialty,\n                                rules:[\n                                    {required:false}\n                                ]\n                            })(<Input placeholder=\"请输入\" disabled={this.props.disabled}/>)}\n                        </Form.Item>\n                    </Col>\n                </Row>\n                <Row>\n                    <Col span={8}>\n                        <Form.Item label=\"职务职称\">{\n                            getFieldDecorator(\"positionAndTitle\",{\n                                initialValue:[data.position,data.title],\n                                rules:[\n                                    {required:true,message:\"职务职称不能为空！\"}\n                                ]\n                            })(\n                                <Cascader \n                                    options={job} placeholder=\"请选择\" \n                                    disabled={this.props.disabled}\n                                />\n                            )}\n                        </Form.Item>\n                    </Col>\n                    <Col span={7} offset={1}>\n                        <Form.Item label=\"身份证号\">{\n                            getFieldDecorator(\"idcard\",{\n                                rules:[\n                                    {required:true,message:\"身份证号码不能为空！\"}\n                                ]\n                            })(<Input placeholder=\"请输入\" disabled={this.props.disabled}/>)}\n                        </Form.Item>\n                    </Col>\n                </Row>\n                <Row>\n                    <Col span={8}>\n                        <Form.Item\n                            label=\"签字表\" className=\"signature-photos must-upload\"\n                            validateStatus={\n                                !this.state.hasFileValidateError\n                                    ?(this.state.uploadSuccess.signature?\"\":\"error\")\n                                    :(this.state.fileList.signature.length>0?\"\":\"error\")\n                            }\n                            help={\n                                !this.state.hasFileValidateError\n                                    ?(this.state.uploadSuccess.signature?\"支持扩展名：.jpg .png\":\"文件上传失败！\")\n                                    :(this.state.fileList.signature.length>0?\"支持扩展名：.jpg .png\":\"必须上传此文件！\")\n                            }\n                        >\n                            <Row>\n                                <Col span={8}>\n                                    <Upload {...this.uploadPhotoConfig}\n                                        name=\"signature\"\n                                        customRequest={(fileObject:object)=>{\n                                            this.uploadPhoto(fileObject,\"signature\");\n                                        }}\n                                        onRemove={(file:UploadFile)=>{\n                                            this.uploadPhotoRemove(file,\"signature\")\n                                        }}\n                                        onPreview={(file:UploadFile)=>{\n                                            this.uploadPhotoPreview(file,\"signature\")\n                                        }}\n                                        fileList={this.state.fileList.signature}\n                                        disabled={this.props.disabled}\n                                    >\n                                        {this.state.uploadLimit.signature>this.state.fileList.signature.length\n                                        ?(\n                                            <div>\n                                                <Icon type=\"plus\" />\n                                                <div className=\"ant-upload-text\">上传</div>\n                                            </div>\n                                        )\n                                        :null}\n                                    </Upload>\n                                </Col>\n                                <Col span={8}>\n                                    <Button type=\"dashed\" style={{width:102,height:102}}>\n                                        <Icon type=\"download\" /><br/>\n                                        签字表模板\n                                    </Button>\n                                </Col>\n                            </Row>  \n                        </Form.Item>\n                    </Col>\n                    <Col span={7} offset={1}>\n                        <Form.Item\n                            label=\"身份证正面\" className=\"identityFront-photos must-upload\"\n                            validateStatus={\n                                !this.state.hasFileValidateError\n                                    ?(this.state.uploadSuccess.identityFront?\"\":\"error\")\n                                    :(this.state.fileList.identityFront.length>0?\"\":\"error\")\n                            }\n                            help={\n                                !this.state.hasFileValidateError\n                                    ?(this.state.uploadSuccess.identityFront?\"支持扩展名：.jpg .png\":\"文件上传失败！\")\n                                    :(this.state.fileList.identityFront.length>0?\"支持扩展名：.jpg .png\":\"必须上传此文件！\")\n                            }\n                        >\n                            <Row>\n                                <Col span={8}>\n                                    <Upload {...this.uploadPhotoConfig}\n                                        name=\"identityFront\"\n                                        customRequest={(fileObject:object)=>{\n                                            this.uploadPhoto(fileObject,\"identityFront\");\n                                        }}\n                                        onRemove={(file:UploadFile)=>{\n                                            this.uploadPhotoRemove(file,\"identityFront\")\n                                        }}\n                                        onPreview={(file:UploadFile)=>{\n                                            this.uploadPhotoPreview(file,\"identityFront\")\n                                        }}\n                                        fileList={this.state.fileList.identityFront}\n                                        disabled={this.props.disabled}\n                                    >\n                                        {this.state.uploadLimit.identityFront>this.state.fileList.identityFront.length\n                                        ?(\n                                            <div>\n                                                <Icon type=\"plus\" />\n                                                <div className=\"ant-upload-text\">上传</div>\n                                            </div>\n                                        )\n                                        :null}\n                                    </Upload>\n                                </Col>\n                                <Col span={8} offset={1}>\n                                    <Button type=\"dashed\" style={{height:102,width:102}}>\n                                        <Icon type=\"file-image\" style={{fontSize:32}} />\n                                        <br/>\n                                        <span>示例图</span><Icon type=\"zoom-in\" />\n                                    </Button>\n                                </Col>\n                            </Row>\n                        </Form.Item>\n                    </Col>\n                    <Col span={7} offset={1}>\n                        <Form.Item\n                            label=\"身份证背面\" className=\"identityBack-photos must-upload\"\n                            validateStatus={\n                                !this.state.hasFileValidateError\n                                    ?(this.state.uploadSuccess.identityBack?\"\":\"error\")\n                                    :(this.state.fileList.identityBack.length>0?\"\":\"error\")\n                            }\n                            help={\n                                !this.state.hasFileValidateError\n                                    ?(this.state.uploadSuccess.identityBack?\"支持扩展名：.jpg .png\":\"文件上传失败！\")\n                                    :(this.state.fileList.identityBack.length>0?\"支持扩展名：.jpg .png\":\"必须上传此文件！\")\n                            }\n                        >\n                            <Row>\n                                <Col span={8}>\n                                    <Upload\n                                        {...this.uploadPhotoConfig}\n                                        name=\"identityBack\"\n                                        customRequest={(fileObject:object)=>{\n                                            this.uploadPhoto(fileObject,\"identityBack\");\n                                        }}\n                                        onRemove={(file:UploadFile)=>{\n                                            this.uploadPhotoRemove(file,\"identityBack\")\n                                        }}\n                                        onPreview={(file:UploadFile)=>{\n                                            this.uploadPhotoPreview(file,\"identityBack\")\n                                        }}\n                                        fileList={this.state.fileList.identityBack}\n                                        disabled={this.props.disabled}\n                                    >\n                                        {this.state.uploadLimit.identityBack>this.state.fileList.identityBack.length\n                                        ?(\n                                            <div>\n                                                <Icon type=\"plus\" />\n                                                <div className=\"ant-upload-text\">上传</div>\n                                            </div>\n                                        )\n                                        :null}\n                                    </Upload>\n                                </Col>\n                                <Col span={8} offset={1}>\n                                    <Button type=\"dashed\" style={{height:102,width:102}}>\n                                        <Icon type=\"file-image\" style={{fontSize:32}} />\n                                        <br/>\n                                        <span>示例图</span><Icon type=\"zoom-in\" />\n                                    </Button>\n                                </Col>\n                            </Row>\n                        </Form.Item>\n                    </Col>\n                </Row>\n                <Row>\n                    <Col span={24}>\n                        <Form.Item label=\"工作履历\">\n                            <ApplyFormResume \n                                resumes={this.props.manager.personalResumes} \n                                onChange={this.resumeChangeHandler}\n                                disabled={this.props.disabled}\n                            />\n                        </Form.Item>\n                    </Col>\n                </Row>\n            </Form>\n        );\n    }\n\n    /**\n     * 组件载入后，拆解管理人员的身份证正面和反面\n     */\n    componentDidMount=()=>{\n        const {idcardImg}=this.props.manager;\n        const identityArray=idcardImg.split(\",\");\n        const idFrontString=identityArray[0],\n            idBackString=identityArray.length>1?identityArray[1]:\"\";\n        const {identityFront,identityBack}=this.state.fileList;\n        \n        this.setState({\n            ...this.state,\n            fileList:{\n                ...this.state.fileList,\n                identityFront:ApplyUtils.urlStringToUploadArray(identityFront,idFrontString),\n                identityBack:ApplyUtils.urlStringToUploadArray(identityBack,idBackString)\n            }\n        });\n    }\n\n    /**\n     * 上传图片\n     */\n    uploadPhoto=async (fileObject:object,key:string)=>{\n        // 上传文件或图片\n        const option=fileObject as {file:File};\n        const uploadResponse=await (new HttpRequest())\n            .upload<{url:string},{applyNo:string}>\n            (\n                `webapi/comm/uploadFile`,\n                option.file,\n                \"file\",\n                {applyNo:this.props.serialNumber}\n            );\n        const {uploadSuccess}=this.state;\n        uploadSuccess[key]=(uploadResponse.success&&(uploadResponse.data!==null));\n        \n        //上传失败显示\n        if(!uploadSuccess[key]||!uploadResponse.data){\n            this.setState({\n                ...this.state,\n                uploadSuccess:uploadSuccess\n            });\n            return;\n        }\n\n        //上传成功，设置已上传列表\n        const {fileList}=this.state;\n        fileList[key].push({\n            uid:String(fileList[key].length),\n            name:option.file.name,\n            size:0,\n            type:\"\",\n            url:uploadResponse.data.url\n        });\n        this.setState({\n            ...this.state,\n            uploadSuccess:uploadSuccess,\n            fileList:fileList\n        });\n    }\n\n    /**\n     * 全屏查看上传的图片\n     */\n    uploadPhotoPreview=(uploadFile:UploadFile,key:string)=>{\n        // 获取全部上传的图片元素\n        const row=document.querySelector<HTMLDivElement>(`.${key}-photos`);\n        if(!row) return;\n        const imgArray=row.querySelectorAll<HTMLImageElement>\n            (\".ant-upload-list-item-image\");\n        const imageList:Array<HTMLImageElement>=[];\n        const {fileList}=this.state;\n\n        const viewImageNameSet=ApplyUtils.uploadArrayToNameSet(fileList[key]);\n        let currentIndex=0;\n        imgArray.forEach((img,index)=>{\n            if(viewImageNameSet.has(img.alt)){\n                imageList.push(img);\n                currentIndex=(img.alt===uploadFile.name?index:currentIndex);\n            }\n        });\n\n        ImageViewer.view(imageList,currentIndex);\n    }\n\n    /**\n     * 删除上传的文件或图片\n     */\n    uploadPhotoRemove=(file:UploadFile,key:string)=>{\n        const {confirm}=Modal;\n        const {fileList}=this.state;\n        confirm({\n            title: '确定要删除当前上传的图片么？',\n            okText: '继续删除',\n            okType: 'danger',\n            cancelText: '取消',\n            onOk:()=>{\n                fileList[key].splice(fileList[key].findIndex(item=>item.uid===file.uid),1);\n                this.setState({\n                    ...this.state,\n                    fileList:fileList\n                });\n            },\n        });\n    }\n\n    /**\n     * 提供给子组件进行调用，修改人员中的履历列表\n     */\n    resumeChangeHandler=(resumes:Array<ApplyContentManagerResume>)=>{   \n        const {data}=this.state;\n        data.personalResumes=resumes;\n        this.setState({\n            ...this.state,\n            data:data\n        });\n    }\n\n    /**\n     * 校验表单并返回表单内容\n     */\n    validateFieldsAndScroll=():Promise<FormValidateResult<ApplyContentManager>>=>\n        (new Promise<FormValidateResult<ApplyContentManager>>((resolve,reject)=>{\n            this.props.form.validateFieldsAndScroll((errors,values)=>{\n                //格式转换\n                values.birthday=values.birthday.format(\"YYYY-MM-DD\");\n\n\n                //报错返回\n                if(errors){\n                    resolve({hasError:true,message:\"\",data:null,...values});\n                }\n\n                // 验证文件列表\n                const {identityFront,identityBack,signature}=this.state.fileList;\n                if(identityFront.length<1){\n                    this.setState({\n                        ...this.state,\n                        hasFileValidateError:true\n                    });\n                    resolve({hasError:true,message:\"必须上传身份证正面图片！\",data:null});\n                }\n                if(identityBack.length<1){\n                    this.setState({\n                        ...this.state,\n                        hasFileValidateError:true\n                    });\n                    resolve({hasError:true,message:\"必须上传身份证背面图片！\",data:null});\n                }\n                if(signature.length<1){\n                    this.setState({\n                        ...this.state,\n                        hasFileValidateError:true\n                    });\n                    resolve({hasError:true,message:\"必须上传签字表图片！\",data:null});\n                }\n\n                // 转换文件列表\n                const identityImages=ApplyUtils.uploadArrayToUrlString(\n                    identityFront.concat(identityBack)\n                );\n                const signatureImages=ApplyUtils.uploadArrayToUrlString(\n                    signature\n                );\n\n                resolve({\n                    ...this.state.data,\n                    ...values,\n                    idcardImg:identityImages,\n                    signature:signatureImages\n                });\n            })\n        })\n    );\n}\nexport default Form.create<ApplyFormLegalProps>({name:\"applyFormLegal\"})(ApplyFormLegal);"]},"metadata":{},"sourceType":"module"}