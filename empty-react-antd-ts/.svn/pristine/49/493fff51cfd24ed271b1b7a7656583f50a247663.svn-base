{"ast":null,"code":"import \"antd/es/button/style/css\";\nimport _Button from \"antd/es/button\";\nimport \"antd/es/col/style/css\";\nimport _Col from \"antd/es/col\";\nimport \"antd/es/divider/style/css\";\nimport _Divider from \"antd/es/divider\";\nimport \"antd/es/breadcrumb/style/css\";\nimport _Breadcrumb from \"antd/es/breadcrumb\";\nimport \"antd/es/icon/style/css\";\nimport _Icon from \"antd/es/icon\";\nimport \"antd/es/typography/style/css\";\nimport _Typography from \"antd/es/typography\";\nimport \"antd/es/modal/style/css\";\nimport _Modal from \"antd/es/modal\";\nvar _jsxFileName = \"/Users/maqiang/\\u7F16\\u7A0B/yzwj-recorder-web/src/pages/public/RecordStaff.tsx\";\nimport React from 'react';\nimport Container, { ContainerLoading } from '../../components/Container';\nimport { ApplySectionRecordStep } from '../../components/ApplyHeader';\nimport ApplyFormLegal from '../../components/ApplyFormLegal';\nimport ApplyFormPrincipal from '../../components/ApplyFormPrincipal';\nimport ApplyFormContact from '../../components/ApplyFormContact';\nimport { Link, withRouter } from 'react-router-dom';\nimport StaffManager from '../../components/StaffManager';\nimport { ApplyStep, PageError500 } from '../../app/Model';\nimport { HttpRequest } from '../../app/Request';\n/**\n * 备案流程：第三步，人员信息\n */\n\nclass RecordStaff extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      serialNumber: this.props.match.params.id,\n      isLoaded: false\n    };\n\n    this.submitApplyConfirm = () => {\n      const history = this.props.history;\n\n      _Modal.confirm({\n        title: '是否继续提交申请?',\n        content: '提交后将无法修改！',\n        okText: '提交',\n        cancelText: '再看看',\n\n        onOk() {\n          history.push(\"/public/record/step-result/1\");\n        },\n\n        onCancel() {}\n\n      });\n    };\n  }\n\n  /**\n   * 页面布局\n   */\n  render() {\n    //未载入数据时\n    if (!this.state.isLoaded) {\n      return React.createElement(ContainerLoading, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 40\n        },\n        __self: this\n      });\n    }\n\n    const Title = _Typography.Title;\n    const recordApply = {\n      applyNo: \"337676\",\n      applyDeadline: \"2019年1月1日\"\n    };\n    return React.createElement(Container, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 48\n      },\n      __self: this\n    }, React.createElement(_Breadcrumb, {\n      className: \"breadcrumb\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 50\n      },\n      __self: this\n    }, React.createElement(_Breadcrumb.Item, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 51\n      },\n      __self: this\n    }, React.createElement(_Icon, {\n      type: \"file-text\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 51\n      },\n      __self: this\n    }), React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 51\n      },\n      __self: this\n    }, \"\\u6267\\u4E1A\\u7533\\u8BF7\")), React.createElement(_Breadcrumb.Item, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 52\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 52\n      },\n      __self: this\n    }, \"\\u5907\\u6848\"))), React.createElement(Title, {\n      level: 4,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 54\n      },\n      __self: this\n    }, \"\\u5907\\u6848\\u7533\\u8BF7\"), React.createElement(ApplySectionRecordStep, Object.assign({}, ApplyStep.RECORD_STAFF, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 57\n      },\n      __self: this\n    })), React.createElement(_Divider, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 58\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      className: \"title-inner\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 58\n      },\n      __self: this\n    }, \"\\u7B2C\\u4E09\\u6B65\\uFF1A\\u4EBA\\u5458\\u4FE1\\u606F\")), React.createElement(_Col, {\n      span: 22,\n      offset: 1,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61\n      },\n      __self: this\n    }, React.createElement(\"h4\", {\n      className: \"title-form-sub\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62\n      },\n      __self: this\n    }, \"\\u6CD5\\u4EBA\\u4FE1\\u606F\"), React.createElement(ApplyFormLegal, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63\n      },\n      __self: this\n    })), React.createElement(_Col, {\n      span: 22,\n      offset: 1,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67\n      },\n      __self: this\n    }, React.createElement(\"h4\", {\n      className: \"title-form-sub\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68\n      },\n      __self: this\n    }, \"\\u8D1F\\u8D23\\u4EBA\\u4FE1\\u606F\"), React.createElement(ApplyFormPrincipal, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69\n      },\n      __self: this\n    })), React.createElement(_Col, {\n      span: 22,\n      offset: 1,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73\n      },\n      __self: this\n    }, React.createElement(\"h4\", {\n      className: \"title-form-sub\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74\n      },\n      __self: this\n    }, \"\\u8054\\u7CFB\\u4EBA\\u4FE1\\u606F\"), React.createElement(ApplyFormContact, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75\n      },\n      __self: this\n    })), React.createElement(_Col, {\n      span: 22,\n      offset: 1,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79\n      },\n      __self: this\n    }, React.createElement(\"h4\", {\n      className: \"title-form-sub\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80\n      },\n      __self: this\n    }, \"\\u5176\\u4ED6\\u4EBA\\u5458\"), React.createElement(StaffManager, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81\n      },\n      __self: this\n    })), React.createElement(_Col, {\n      span: 24,\n      className: \"section-buttons\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85\n      },\n      __self: this\n    }, React.createElement(_Button, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86\n      },\n      __self: this\n    }, React.createElement(Link, {\n      to: \"/public/record/step-organization/1\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86\n      },\n      __self: this\n    }, \"\\u4E0A\\u4E00\\u6B65\")), React.createElement(_Button, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87\n      },\n      __self: this\n    }, \"\\u4FDD\\u5B58\\u4F46\\u4E0D\\u63D0\\u4EA4\"), React.createElement(_Button, {\n      type: \"primary\",\n      onClick: this.submitApplyConfirm,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88\n      },\n      __self: this\n    }, \"\\u4FDD\\u5B58\\u5E76\\u63D0\\u4EA4\\u7533\\u8BF7\")));\n  }\n  /**\n   * 组件载入后，载入数据信息（包括申请单信息和管理人员信息）\n   */\n\n\n  async componentDidMount() {\n    //获取申请单信息\n    const applyExistResponse = await new HttpRequest().get(\"webapi/apply/exsitApplyNo?applyNo=\".concat(this.state.serialNumber)); //获取管理人员信息\n\n    const applyManagerResponse = await new HttpRequest().get(\"webapi/apply/managerPersonInfo?applyNo=\".concat(this.state.serialNumber)); // 失败跳转500\n\n    if (!applyExistResponse.success || !applyExistResponse.data || !applyManagerResponse.success || !applyManagerResponse.data) {\n      this.props.history.push(PageError500);\n      return;\n    }\n  }\n  /**\n   * 弹出提交确认框\n   */\n\n\n}\n\nexport default withRouter(RecordStaff);","map":{"version":3,"sources":["/Users/maqiang/编程/yzwj-recorder-web/src/pages/public/RecordStaff.tsx"],"names":["React","Container","ContainerLoading","ApplySectionRecordStep","ApplyFormLegal","ApplyFormPrincipal","ApplyFormContact","Link","withRouter","StaffManager","ApplyStep","PageError500","HttpRequest","RecordStaff","Component","state","serialNumber","props","match","params","id","isLoaded","submitApplyConfirm","history","confirm","title","content","okText","cancelText","onOk","push","onCancel","render","Title","recordApply","applyNo","applyDeadline","RECORD_STAFF","componentDidMount","applyExistResponse","get","applyManagerResponse","success","data"],"mappings":";;;;;;;;;;;;;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,SAAP,IAAoBC,gBAApB,QAA4C,4BAA5C;AAEA,SAA6BC,sBAA7B,QAA2D,8BAA3D;AACA,OAAOC,cAAP,MAA2B,iCAA3B;AACA,OAAOC,kBAAP,MAA+B,qCAA/B;AACA,OAAOC,gBAAP,MAA6B,mCAA7B;AACA,SAASC,IAAT,EAAeC,UAAf,QAAiC,kBAAjC;AACA,OAAOC,YAAP,MAAyB,+BAAzB;AACA,SAAuBC,SAAvB,EAA6FC,YAA7F,QAAiH,iBAAjH;AACA,SAASC,WAAT,QAA0C,mBAA1C;AAEA;;;;AAGA,MAAMC,WAAN,SAA0Bb,KAAK,CAACc,SAAhC,CAA4D;AAAA;AAAA;AAAA,SAC/CC,KAD+C,GAYtD;AACEC,MAAAA,YAAY,EAAC,KAAKC,KAAL,CAAWC,KAAX,CAAiBC,MAAjB,CAAwBC,EADvC;AAEEC,MAAAA,QAAQ,EAAC;AAFX,KAZsD;;AAAA,SA0GxDC,kBA1GwD,GA0GrC,MAAI;AAAA,YACZC,OADY,GACH,KAAKN,KADF,CACZM,OADY;;AAEnB,aAAMC,OAAN,CAAc;AACVC,QAAAA,KAAK,EAAE,WADG;AAEVC,QAAAA,OAAO,EAAE,WAFC;AAGVC,QAAAA,MAAM,EAAE,IAHE;AAIVC,QAAAA,UAAU,EAAE,KAJF;;AAKVC,QAAAA,IAAI,GAAG;AACHN,UAAAA,OAAO,CAACO,IAAR,CAAa,8BAAb;AACH,SAPS;;AAQVC,QAAAA,QAAQ,GAAG,CAAE;;AARH,OAAd;AAUH,KAtHuD;AAAA;;AAiBxD;;;AAGAC,EAAAA,MAAM,GAAE;AACJ;AACA,QAAG,CAAC,KAAKjB,KAAL,CAAWM,QAAf,EAAwB;AACpB,aACI,oBAAC,gBAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADJ;AAGH;;AANG,UAQGY,KARH,eAQGA,KARH;AASJ,UAAMC,WAAwB,GAAC;AAACC,MAAAA,OAAO,EAAC,QAAT;AAAkBC,MAAAA,aAAa,EAAC;AAAhC,KAA/B;AAEA,WACI,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAEI;AAAY,MAAA,SAAS,EAAC,YAAtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI,gCAAY,IAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAiB;AAAM,MAAA,IAAI,EAAC,WAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAAjB,EAAyC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kCAAzC,CADJ,EAEI,gCAAY,IAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAiB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAAjB,CAFJ,CAFJ,EAMI,oBAAC,KAAD;AAAO,MAAA,KAAK,EAAE,CAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kCANJ,EASI,oBAAC,sBAAD,oBAA4B1B,SAAS,CAAC2B,YAAtC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OATJ,EAUI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAS;AAAM,MAAA,SAAS,EAAC,aAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0DAAT,CAVJ,EAaI;AAAK,MAAA,IAAI,EAAE,EAAX;AAAe,MAAA,MAAM,EAAE,CAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAI,MAAA,SAAS,EAAC,gBAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kCADJ,EAEI,oBAAC,cAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFJ,CAbJ,EAmBI;AAAK,MAAA,IAAI,EAAE,EAAX;AAAe,MAAA,MAAM,EAAE,CAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAI,MAAA,SAAS,EAAC,gBAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wCADJ,EAEI,oBAAC,kBAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFJ,CAnBJ,EAyBI;AAAK,MAAA,IAAI,EAAE,EAAX;AAAe,MAAA,MAAM,EAAE,CAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAI,MAAA,SAAS,EAAC,gBAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wCADJ,EAEI,oBAAC,gBAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFJ,CAzBJ,EA+BI;AAAK,MAAA,IAAI,EAAE,EAAX;AAAe,MAAA,MAAM,EAAE,CAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAI,MAAA,SAAS,EAAC,gBAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kCADJ,EAEI,oBAAC,YAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFJ,CA/BJ,EAqCI;AAAK,MAAA,IAAI,EAAE,EAAX;AAAe,MAAA,SAAS,EAAC,iBAAzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAQ,oBAAC,IAAD;AAAM,MAAA,EAAE,EAAC,oCAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4BAAR,CADJ,EAEI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,8CAFJ,EAGI;AAAQ,MAAA,IAAI,EAAC,SAAb;AAAuB,MAAA,OAAO,EAAE,KAAKf,kBAArC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oDAHJ,CArCJ,CADJ;AA6CH;AAED;;;;;AAGA,QAAMgB,iBAAN,GAAyB;AACrB;AACA,UAAMC,kBAAkD,GACpD,MAAQ,IAAI3B,WAAJ,EAAD,CAAoB4B,GAApB,6CACkC,KAAKzB,KAAL,CAAWC,YAD7C,EADX,CAFqB,CAMrB;;AACA,UAAMyB,oBAA6D,GAC/D,MAAQ,IAAI7B,WAAJ,EAAD,CAAoB4B,GAApB,kDACuC,KAAKzB,KAAL,CAAWC,YADlD,EADX,CAPqB,CAYrB;;AACA,QAAG,CAACuB,kBAAkB,CAACG,OAApB,IAA6B,CAACH,kBAAkB,CAACI,IAAjD,IACG,CAACF,oBAAoB,CAACC,OADzB,IACkC,CAACD,oBAAoB,CAACE,IAD3D,EACgE;AAC5D,WAAK1B,KAAL,CAAWM,OAAX,CAAmBO,IAAnB,CAAwBnB,YAAxB;AACA;AACH;AAGJ;AAED;;;;;AAvGwD;;AAwH5D,eAAeH,UAAU,CAACK,WAAD,CAAzB","sourcesContent":["import React from 'react';\nimport Container, { ContainerLoading } from '../../components/Container';\nimport { Breadcrumb,Icon,Typography, Button, Divider, Col, Modal } from 'antd';\nimport { ApplySectionPrompt, ApplySectionRecordStep } from '../../components/ApplyHeader';\nimport ApplyFormLegal from '../../components/ApplyFormLegal';\nimport ApplyFormPrincipal from '../../components/ApplyFormPrincipal';\nimport ApplyFormContact from '../../components/ApplyFormContact';\nimport { Link, withRouter } from 'react-router-dom';\nimport StaffManager from '../../components/StaffManager';\nimport { ApplyContent, ApplyStep, AppComponentProps, ApplyContentManager, ApplyContentExist, PageError500 } from '../../app/Model';\nimport { HttpRequest, HttpResponse } from '../../app/Request';\n\n/**\n * 备案流程：第三步，人员信息\n */\nclass RecordStaff extends React.Component<AppComponentProps>{\n    readonly state:{\n        /**申请单号 */\n        serialNumber:string;\n        /**是否载入数据完成 */\n        isLoaded:boolean;\n        /**法人信息 */\n        legal?:ApplyContentManager,\n        /**负责人信息 */\n        principal?:ApplyContentManager,\n        /**联系人信息 */\n        contact?:ApplyContentManager,\n    }={\n        serialNumber:this.props.match.params.id,\n        isLoaded:false,\n    };\n\n    /**\n     * 页面布局\n     */\n    render(){\n        //未载入数据时\n        if(!this.state.isLoaded){\n            return (\n                <ContainerLoading />\n            );\n        }\n\n        const {Title}=Typography;\n        const recordApply:ApplyContent={applyNo:\"337676\",applyDeadline:\"2019年1月1日\"};\n\n        return (\n            <Container>\n                {/* 标题 */}\n                <Breadcrumb className=\"breadcrumb\">\n                    <Breadcrumb.Item><Icon type=\"file-text\"/><span>执业申请</span></Breadcrumb.Item>\n                    <Breadcrumb.Item><span>备案</span></Breadcrumb.Item>\n                </Breadcrumb>\n                <Title level={4}>备案申请</Title>\n\n                {/* 顶部 */}\n                <ApplySectionRecordStep {...ApplyStep.RECORD_STAFF} />\n                <Divider><span className=\"title-inner\">第三步：人员信息</span></Divider>\n\n                {/* 表单：法人信息 */}\n                <Col span={22} offset={1}>\n                    <h4 className=\"title-form-sub\">法人信息</h4>\n                    <ApplyFormLegal />\n                </Col>\n\n                {/* 表单：负责人信息 */}\n                <Col span={22} offset={1}>\n                    <h4 className=\"title-form-sub\">负责人信息</h4>\n                    <ApplyFormPrincipal />\n                </Col>\n\n                {/* 表单：联系人信息 */}\n                <Col span={22} offset={1}>\n                    <h4 className=\"title-form-sub\">联系人信息</h4>\n                    <ApplyFormContact />\n                </Col>\n\n                {/* 表单：人员管理 */}\n                <Col span={22} offset={1}>\n                    <h4 className=\"title-form-sub\">其他人员</h4>\n                    <StaffManager />\n                </Col>\n\n                {/* 按钮 */}\n                <Col span={24} className=\"section-buttons\">\n                    <Button><Link to=\"/public/record/step-organization/1\">上一步</Link></Button>\n                    <Button>保存但不提交</Button>\n                    <Button type=\"primary\" onClick={this.submitApplyConfirm}>保存并提交申请</Button>\n                </Col>\n            </Container>\n        );\n    }\n\n    /**\n     * 组件载入后，载入数据信息（包括申请单信息和管理人员信息）\n     */\n    async componentDidMount(){\n        //获取申请单信息\n        const applyExistResponse:HttpResponse<ApplyContentExist>=\n            await ((new HttpRequest()).get<ApplyContentExist>(\n                `webapi/apply/exsitApplyNo?applyNo=${this.state.serialNumber}`\n            ));\n        //获取管理人员信息\n        const applyManagerResponse:HttpResponse<Array<ApplyContentManager>>=\n            await ((new HttpRequest()).get<Array<ApplyContentManager>>(\n                `webapi/apply/managerPersonInfo?applyNo=${this.state.serialNumber}`\n            ));\n\n        // 失败跳转500\n        if(!applyExistResponse.success||!applyExistResponse.data\n            ||!applyManagerResponse.success||!applyManagerResponse.data){\n            this.props.history.push(PageError500);\n            return;\n        }\n\n        \n    }\n\n    /**\n     * 弹出提交确认框\n     */\n    submitApplyConfirm=()=>{\n        const {history}=this.props;\n        Modal.confirm({\n            title: '是否继续提交申请?',\n            content: '提交后将无法修改！',\n            okText: '提交',\n            cancelText: '再看看',\n            onOk() {\n                history.push(\"/public/record/step-result/1\");\n            },\n            onCancel() {},\n        });\n    }\n}\nexport default withRouter(RecordStaff);"]},"metadata":{},"sourceType":"module"}