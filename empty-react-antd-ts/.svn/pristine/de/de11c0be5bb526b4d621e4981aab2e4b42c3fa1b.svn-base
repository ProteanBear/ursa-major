import React, { CSSProperties } from 'react';
import {Col,Typography,Form,Upload,Button,Icon, Checkbox} from 'antd';

import { RecordApply } from '../models/Record';
import { DictionaryData, DictionaryLoader } from '../app/DictionaryLoader';

/**
 * 诊疗范围类型（全部、简略）
 */
export enum ApplyFormMedicalType{
    FULL,SIMPLE
}

/**
 * 诊疗范围环境变量
 */
export const ApplyFormMedicalTypeContext=React.createContext<{type:ApplyFormMedicalType}>({
    type:ApplyFormMedicalType.SIMPLE
})

/**
 * 申请公用表单：诊疗范围
 */
 export class ApplyFormMedical extends React.Component<RecordApply>{
    render(){
        const firstTitleStyle:CSSProperties={fontSize:16,fontWeight:"bold"};

        return (
            <section>
                <ApplyFormMedicalTypeContext.Consumer>
                    {({type})=>{
                        const medical:Array<DictionaryData>=(
                            type===ApplyFormMedicalType.SIMPLE
                                ?DictionaryLoader.instance.medicalSimple()
                                :DictionaryLoader.instance.medical()
                        );
                        return (
                            <ul className="form-ul-group">
                               {
                                    medical.map((dict:DictionaryData)=>{
                                        return dict.children&&dict.children.length>0
                                        ?(
                                            <li>
                                                <Col span={4}>
                                                    <Checkbox
                                                        value={dict.value}
                                                        style={{marginTop:8}}
                                                    >
                                                        <span style={firstTitleStyle}>{dict.label}</span>
                                                    </Checkbox>
                                                </Col>
                                                <Col span={20}>
                                                    {dict.children.map((childDict:DictionaryData)=>(
                                                        <Col span={6}>
                                                            <Checkbox
                                                                value={childDict.value}
                                                                style={{marginTop:11}}
                                                            >
                                                                {childDict.label}
                                                            </Checkbox>
                                                        </Col>
                                                    ))}
                                                </Col>
                                            </li>
                                        ):(
                                            <li>
                                                <Col span={24}>
                                                    <Checkbox
                                                        value={dict.value}
                                                        style={{marginTop:8}}
                                                    >
                                                        <span style={firstTitleStyle}>{dict.label}</span>
                                                    </Checkbox>
                                                </Col>
                                            </li>
                                        );
                                    })
                               } 
                            </ul>
                        );
                    }}
                </ApplyFormMedicalTypeContext.Consumer>
            </section>
        );
     }
 }